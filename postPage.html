<html>
<body>

<h1 style="text-align: center;">Post your creation</h1>
<table style="height: 214px; width: 371.5px; background-color: #ccd9cf; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align: center;">
<label for="img">Select image:</label>
<input type="file" id="img" name="img" accept="image/*"/>
</td>

</tr>
</tbody>
</table>
<form>
<p style="text-align: center;"><label for = "dishName">Dish name: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label> <input type="text" id="dishName" name="dishName"/></p>
<p style="text-align: center;"><label for = "restaurant">Restaurant name:</label> <input type="text" id="restaurant" name="restaurant" /></p>
<p style="text-align: center;"><label for = "price">Price:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label> <input type="text" id="price" name="price"/></p>
<p style="text-align: center;"><label for = "description">Description:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label> <input type="text" id="description" name="description"/></p>
<p style="text-align: center;"><button onclick="loadDoc()">Post</button> </p>
</form>


<script>
// Check for the File API support.
if (window.File && window.FileReader && window.FileList && window.Blob) {
  document.getElementById('img').addEventListener('change', handleFileSelect, false);
} else {
  alert('The File APIs are not fully supported in this browser.');
}

function handleFileSelect(evt) {
  var f = evt.target.files[0]; // FileList object
  if(f != null)
      var reader = new FileReader();
      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          var binaryData = e.target.result;
          //Converting Binary Data to base 64
          var base64String = window.btoa(binaryData);
          //showing file converted to base64
          document.getElementById('base64').value = base64String;
          alert('File converted to base64 successfuly!\nCheck in Textarea');
        };
      })(f);
      // Read in the image file as a data URL.
      //reader.readAsBinaryString(f);
    }

var data = {};
data.category = "Astral";
data.type = "Owner";
data.description = "aa";
var json = JSON.stringify(data);

console.log(data);
console.log(json);

let xhr = new XMLHttpRequest();
xhr.open("POST", "http://10.147.20.66/api/search",true);
xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
xhr.addEventListener("load", function (event) {
  console.log(this);
});

xhr.send(json);
xhr.onload = () => alert(xhr.response);
</script>


</body>
</html>